<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>SMOOTutor Chats</title>
  <meta name="viewport">

  <!-- Favicons -->
  <link href="assets/img/favicon.png" rel="icon">
  <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Fonts and Icons -->
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;1,300;1,400;1,500;1,600;1,700;1,800&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Raleway:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
  rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />

  <!-- Vendor CSS Files -->
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/aos/aos.css" rel="stylesheet">
  <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">

  <!-- Main CSS File -->
  <link href="assets/css/main.css" rel="stylesheet">

  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.5/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/ScrollTrigger.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/ModifiersPlugin.min.js"></script>

  <!-- Custom CSS -->
  <style>
    /* Improved CSS to make the page more modern and appealing */

    body.chats-page {
      background-color: #f8f9fa;
      margin: 0;
      color: #212529;
    }

    /* Chat Container */
    .chat-container {
      display: flex;
      height: calc(80vh - 70px);
    }

    /* Chat List */
    .chat-list {
      width: 25%;
      background-color: #ffffff;
      border-right: 1px solid #dee2e6;
      overflow-y: auto;
      position: relative;
    }

    .chat-list-header {
      padding: 15px;
      background-color: #ffffff;
      color: #212529;
      display: flex;
      align-items: center;
      justify-content: space-between;
      border-bottom: 1px solid #dee2e6;
    }

    .chat-list-header h4 {
      margin: 0;
      font-weight: 600;
      font-size: 1.1em;
    }

    .chat-list-header button {
      background: none;
      border: none;
      color: #212529;
      font-size: 1.5em;
      cursor: pointer;
    }

    .chat-list-header button:hover {
      color: #007bff;
    }

    .chat-item {
      display: flex;
      align-items: center;
      padding: 15px;
      cursor: pointer;
      transition: background 0.3s, box-shadow 0.3s;
    }

    .chat-item:hover {
      background-color: #e9ecef;
      box-shadow: inset 5px 0 0 #007bff;
    }

    .chat-item.active {
      background-color: #e9ecef;
      box-shadow: inset 5px 0 0 #007bff;
    }

    .chat-item img {
      border-radius: 50%;
      margin-right: 15px;
      width: 50px;
      height: 50px;
      object-fit: cover;
    }

    .chat-item-info {
      display: flex;
      flex-direction: column;
      width: 100%;
    }

    .chat-item-name {
      font-weight: 600;
      color: #212529;
    }

    .chat-item-last-message {
      font-size: 0.9em;
      color: #6c757d;
      margin-top: 3px;
    }

    /* Chat Window */
    .chat-window {
      width: 75%;
      display: flex;
      flex-direction: column;
      background-color: #f8f9fa;
      position: relative;
    }

    /* No Chat Selected Placeholder */
    .no-chat-selected {
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      background-color: #f8f9fa;
      text-align: center;
      padding: 20px;
    }

    .no-chat-selected img {
      max-width: 60%;
      height: auto;
    }

    .no-chat-selected p {
      margin-top: 20px;
      color: #6c757d;
      font-size: 1.2em;
    }

    /* Chat Header */
    .chat-header {
      display: flex;
      align-items: center;
      padding: 15px;
      background-color: #ffffff;
      color: #212529;
      border-bottom: 1px solid #dee2e6;
    }

    .chat-header-info {
      display: flex;
      align-items: center;
      flex-grow: 1;
    }

    .chat-header img {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      margin-right: 10px;
      object-fit: cover;
    }

    .chat-header .chat-status {
      font-size: 0.85em;
      color: #28a745;
    }

    .chat-header-actions button {
      background: none;
      border: none;
      margin-left: 10px;
      color: #212529;
      cursor: pointer;
      transition: color 0.3s;
    }

    .chat-header-actions button:hover {
      color: #007bff;
    }

    .chat-header-actions button i {
      font-size: 1.2em;
    }

    /* Message List */
    .message-list {
      flex-grow: 1;
      overflow-y: auto;
      padding: 20px;
      display: flex;
      flex-direction: column;
      background-color: #f8f9fa;
      scroll-behavior: smooth;
    }

    .message {
      max-width: 70%;
      padding: 12px 16px;
      border-radius: 20px;
      margin-bottom: 15px;
      font-size: 1em;
      position: relative;
      word-wrap: break-word;
      animation: fadeIn 0.3s ease-in-out;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .message.sent {
      align-self: flex-end;
      background-color: #d1e7dd;
      color: #0f5132;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    }

    .message.received {
      align-self: flex-start;
      background-color: #ffffff;
      color: #212529;
      border: 1px solid #dee2e6;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    }

    .message .timestamp {
      font-size: 0.8em;
      color: #adb5bd;
      position: absolute;
      bottom: -18px;
      right: 10px;
    }

    .message .delete-message {
      position: absolute;
      top: 5px;
      right: 10px;
      background: none;
      border: none;
      color: #adb5bd;
      cursor: pointer;
      font-size: 1em;
      display: none;
      transition: color 0.3s;
    }

    .message .delete-message:hover {
      color: #dc3545;
    }

    .message:hover .delete-message {
      display: block;
    }

    /* Message Input */
    .message-input-container {
      padding: 15px;
      background-color: #ffffff;
      border-top: 1px solid #dee2e6;
      display: flex;
      align-items: center;
    }

    .message-input {
      flex: 1;
      padding: 10px 15px;
      border-radius: 30px;
      border: 1px solid #ced4da;
      outline: none;
      background-color: #ffffff;
      margin: 0 10px;
      color: #212529;
      transition: border-color 0.3s, box-shadow 0.3s;
    }

    .message-input:focus {
      border-color: #80bdff;
      box-shadow: 0 0 5px rgba(128, 189, 255, 0.5);
    }

    .message-input-actions {
      background: none;
      border: none;
      font-size: 1.5em;
      color: #212529;
      cursor: pointer;
      transition: color 0.3s;
    }

    .message-input-actions:hover {
      color: #007bff;
    }

    /* Typing Indicator */
    .typing-indicator {
      padding: 5px 15px;
      font-size: 0.9em;
      color: #6c757d;
    }

    /* Scrollbar Styling */
    ::-webkit-scrollbar {
      width: 6px;
    }

    ::-webkit-scrollbar-thumb {
      background-color: #ced4da;
      border-radius: 3px;
    }

    /* Responsive Design */
    @media (max-width: 767px) {
      .chat-container {
        flex-direction: column;
      }

      .chat-list {
        width: 100%;
        border-right: none;
        border-bottom: 1px solid #dee2e6;
      }

      .chat-window {
        width: 100%;
      }

      .chat-list-header h4 {
        font-size: 1em;
      }

      .chat-item-name {
        font-size: 1em;
      }

      .chat-item-last-message {
        font-size: 0.85em;
      }
    }

    .wrapper {
      position: fixed;
      bottom: 0;
      width: 100%;
      overflow: hidden;
      background: #2e3a90;
      /* padding: 10px 0; */
      z-index: 9999;
      transition: background-color 0.3s;
    }

    .boxes {
      overflow: hidden;
      background: #2e3a90;
    }

    .boxes-inner {
      display: flex;
      gap: 110px;
      /* Increased gap for better spacing */
    }

    .box {
      font-size: 20px;
      line-height: 50px;
      color: #fff;
      text-transform: uppercase;
      transition: color 0.3s, transform 0.3s;
      white-space: nowrap;
      cursor: pointer;
      /* Change cursor to pointer on hover */
    }

    .box:hover {
      color: #ffcc00;
      transform: scale(1.15);
    }

    .wrapper:hover {
      background-color: #2e3a90;
      /* Change background color on hover */
    }
  </style>
</head>

<body class="chats-page">

  <!-- Header -->
  <header id="header" class="header d-flex align-items-center sticky-top">
    <div class="container-fluid container-xl position-relative d-flex align-items-center">

      <a href="index.html" class="logo d-flex align-items-center me-auto">
        <img src="assets/img/smootutor-logo.jpg" alt="Logo">
      </a>

      <nav id="navmenu" class="navmenu">
        <ul>
          <li><a href="index.html">Home<br></a></li>
          <li><a href="bookings.html">Bookings</a></li>

          <li class="dropdown">
            <a href="trainers.html" id="notesDropdown" aria-expanded="false">
              Tutors <i class="bi bi-chevron-down toggle-dropdown"></i>
            </a>
            <ul class="dropdown-menu" aria-labelledby="notesDropdown">

              <li><a href="trainers.html" class="dropdown-item">All Tutors</a></li>
              <li><a href="tinder.html" class="dropdown-item">Find My Tutor</a></li>

            </ul>
          </li>
          <li><a href="chats.html">Chats</a></li>
          <li class="dropdown">
            <a href="notes.html" id="notesDropdown" aria-expanded="false">
              Notes <i class="bi bi-chevron-down toggle-dropdown"></i>
            </a>
            <ul class="dropdown-menu" aria-labelledby="notesDropdown">
              <li><a href="notes.html?section=browse" class="dropdown-item">Browse Notes</a></li>
              <li><a href="notes.html?section=saved" class="dropdown-item">Saved Notes</a></li>
            </ul>
          </li>
          <li><a href="contact.html">Contact</a></li>



          <i class="mobile-nav-toggle d-xl-none bi bi-list"></i>
      </nav>

      <a class="btn-getstarted" href="../home/login.html">LOGIN</a>

    </div>
  </header>

  <!-- Main Content -->
  <main class="main">
    <div class="chat-container">
      <!-- Chat List -->
      <div class="chat-list" id="chat-list">
        <!-- Chat List Header -->
        <div class="chat-list-header">
          <h4><a href="chats.html">All Chats</a></h4>
          <button id="new-chat-button"><i class="fas fa-plus"></i></button>
        </div>
        <!-- Chat items will be added here dynamically -->
      </div>

      <!-- Chat Window -->
      <div class="chat-window">

        <!-- Chat Header -->
        <div class="chat-header" id="chat-header">
          <div class="chat-header-info">
            <img src="assets/img/trainers/zenny.jpg" alt="Chat Avatar" id="chat-avatar">
            <div>
              <span id="chat-name">Select a chat</span><br>
              <span class="chat-status" id="chat-status">Online</span>
            </div>
          </div>
          <div class="chat-header-actions">
            <button id="delete-chat-button"><i class="fas fa-trash-alt"></i></button>
            <button><i class="fas fa-search"></i></button>
            <button><i class="fas fa-ellipsis-v"></i></button>
          </div>
        </div>

        <!-- Placeholder for picture when no chat is selected -->
        <div class="no-chat-selected" id="no-chat-selected">
          <!-- Content here -->
        </div>

        <!-- Message List -->
        <div style="width: 100%; height: 100%; background-image: url('assets/img/background_chat.jpg'); 
        background-size: cover; background-position: center;" class="message-list" id="message-list">
          <!-- Messages will appear here -->
        </div>

        <!-- Message Input -->
        <div class="message-input-container" id="message-input-container">
          <button id="emoji-button" class="message-input-actions"><i class="far fa-smile"></i></button>
          <input type="text" id="message-text" class="message-input" placeholder="Type a message..." disabled />
          <button id="attach-file-button" class="message-input-actions"><i class="fas fa-paperclip"></i></button>
          <button id="send-message-button" class="message-input-actions"><i class="fas fa-paper-plane"></i></button>
          <input type="file" id="attach-file-input" style="display: none;">
        </div>
        <div class="typing-indicator" id="typing-indicator" style="display: none;">Typing...</div>
      </div>
    </div>
  </main>

  <!-- Vendor JS Files -->
  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

  <!-- Firebase JS SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-storage-compat.js"></script>

  <!-- Emoji Picker Library -->
  <script src="https://cdn.jsdelivr.net/npm/@joeattardi/emoji-button@4.6.4/dist/index.min.js"></script>

  <!-- Firebase Initialization and Chat Logic -->
  <script>
    // Initialize Firebase
    var firebaseConfig = {
      // Your Firebase config here
      apiKey: "AIzaSyDpmHo8Y79lMhABi1WuRaJ25ulV4JMdRGY",
      authDomain: "smootutor-ed94a.firebaseapp.com",
      databaseURL: "https://smootutor-ed94a-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "smootutor-ed94a",
      storageBucket: "smootutor-ed94a.appspot.com",
      messagingSenderId: "289686522861",
      appId: "1:289686522861:web:5811385ced42106d78b5e4",
      measurementId: "G-46QED8ZFKJ"
    };
    firebase.initializeApp(firebaseConfig);

    const db = firebase.firestore();
    const auth = firebase.auth();
    const storage = firebase.storage();

    let currentUser = null;
    let selectedChatId = null;
    let messagesListener = null;

    // Authenticate and fetch chats
    auth.signInAnonymously().then(() => {
      console.log("User authenticated successfully.");
      auth.onAuthStateChanged(user => {
        if (user) {
          currentUser = user;
          fetchChats();
        }
      });
    }).catch(error => {
      console.error("Authentication error:", error);
    });

    // Fetch and display chats
    function fetchChats() {
      db.collection("Chats")
        .onSnapshot(snapshot => {
          const chatList = document.getElementById("chat-list");
          // Remove existing chat items except header
          chatList.querySelectorAll('.chat-item').forEach(item => item.remove());

          snapshot.forEach(doc => {
            const chatData = doc.data();
            const chatItem = document.createElement("div");
            chatItem.classList.add("chat-item", "d-flex", "align-items-center");
            var picture_link = "assets/img/team/" + chatData.chat_name + ".jpg";
            chatItem.innerHTML = `
              <img src="${chatData.chat_avatar || picture_link}" alt="Avatar" class="rounded-circle me-2" width="50" height="50">
              <div class="chat-item-info">
                <div class="chat-item-name">${chatData.chat_name || "Chat"}</div>
                <div class="chat-item-last-message">${chatData.last_message ? (chatData.last_message.type === 'text' ? chatData.last_message.content : 'Attachment') : ''}</div>
              </div>
            `;
            chatItem.addEventListener("click", () => selectChat(doc.id, chatItem, chatData));
            chatList.appendChild(chatItem);
          });
        }, error => {
          console.error("Error fetching chats:", error);
        });
    }

    // Select chat
    function selectChat(chatId, chatItem, chatData) {
      selectedChatId = chatId;
      document.querySelectorAll('.chat-item').forEach(item => item.classList.remove('active'));
      chatItem.classList.add('active');

      document.getElementById("chat-name").textContent = chatData.chat_name || "Chat";
      var picture_link = "assets/img/team/" + chatData.chat_name + ".jpg";
      document.getElementById("chat-avatar").src = chatData.chat_avatar || picture_link;

      // Show chat header and message input
      document.getElementById("no-chat-selected").style.display = "none";
      document.getElementById("chat-header").style.display = "flex";
      document.getElementById("message-input-container").style.display = "flex";

      loadChat(chatId);
      document.getElementById("message-text").disabled = false;
      document.getElementById("message-text").focus();
    }

    // Load messages for the selected chat
    function loadChat(chatId) {
      if (messagesListener) {
        messagesListener(); // Detach previous listener
      }
      messagesListener = db.collection("Chats").doc(chatId).collection("messages")
        .orderBy("sent_at")
        .onSnapshot(snapshot => {
          const messageList = document.getElementById("message-list");
          messageList.innerHTML = ""; // Clear to prevent duplication
          snapshot.forEach(doc => {
            const messageData = doc.data();
            renderMessage(messageData, doc.id);
          });
          messageList.scrollTop = messageList.scrollHeight;
        }, error => {
          console.error("Error loading messages:", error);
        });
    }

    // Render a single message
    function renderMessage(messageData, messageId) {
      const messageList = document.getElementById("message-list");
      const messageDiv = document.createElement("div");
      messageDiv.classList.add("message");
      messageDiv.classList.add(messageData.sender_id === currentUser.uid ? "sent" : "received");

      let messageContent = '';

      if (messageData.type === "text") {
        messageContent = messageData.content;
      } else if (messageData.type === "file") {
        messageContent = `<a href="${messageData.content}" target="_blank">File Attachment</a>`;
      }

      messageDiv.innerHTML = `
        ${messageContent}
        <div class="timestamp">${formatTimestamp(messageData.sent_at)} ${messageData.sender_id === currentUser.uid ? (messageData.read_by_receiver ? '<i class="fas fa-check-double"></i>' : '<i class="fas fa-check"></i>') : ''}</div>
        <button class="delete-message" onclick="deleteMessage('${selectedChatId}', '${messageId}')"><i class="fas fa-trash-alt"></i></button>
      `;

      messageList.appendChild(messageDiv);
    }

    // Format timestamp
    function formatTimestamp(timestamp) {
      if (!timestamp) return '';
      const date = timestamp.toDate();
      return date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
    }

    // Send a message
    document.getElementById("send-message-button").addEventListener("click", sendMessage);
    document.getElementById("message-text").addEventListener("keypress", event => {
      if (event.key === "Enter" && !event.shiftKey) {
        event.preventDefault();
        sendMessage();
      }
    });

    function sendMessage() {
      const messageText = document.getElementById("message-text").value.trim();
      if (messageText && selectedChatId) {
        const messageRef = db.collection("Chats").doc(selectedChatId).collection("messages").doc();
        const messageData = {
          message_id: messageRef.id,
          content: messageText,
          sender_id: currentUser.uid,
          sent_at: firebase.firestore.FieldValue.serverTimestamp(),
          type: "text",
          read_by_receiver: false
        };

        messageRef.set(messageData).then(() => {
          document.getElementById("message-text").value = "";

          // Update last message in chat document
          db.collection("Chats").doc(selectedChatId).update({
            last_message: messageData
          });
        }).catch(error => {
          console.error("Error sending message:", error);
        });
      }
    }

    // Send a file
    document.getElementById("attach-file-button").addEventListener("click", () => {
      document.getElementById("attach-file-input").click();
    });

    document.getElementById("attach-file-input").addEventListener("change", event => {
      const file = event.target.files[0];
      if (file && selectedChatId) {
        const fileRef = storage.ref().child("chat_files/" + file.name);
        const uploadTask = fileRef.put(file);

        uploadTask.on('state_changed',
          function (snapshot) {
            // Optional: Implement progress indicator
          },
          function (error) {
            console.error("Error uploading file:", error);
          },
          function () {
            uploadTask.snapshot.ref.getDownloadURL().then(function (downloadURL) {
              sendFileMessage(downloadURL);
            });
          }
        );
      }
    });

    function sendFileMessage(fileURL) {
      const messageRef = db.collection("Chats").doc(selectedChatId).collection("messages").doc();
      const messageData = {
        message_id: messageRef.id,
        content: fileURL,
        sender_id: currentUser.uid,
        sent_at: firebase.firestore.FieldValue.serverTimestamp(),
        type: "file",
        read_by_receiver: false
      };

      messageRef.set(messageData).then(() => {
        // Update last message in chat document
        db.collection("Chats").doc(selectedChatId).update({
          last_message: messageData
        });
      }).catch(error => {
        console.error("Error sending file message:", error);
      });
    }

    // Delete a message
    function deleteMessage(chatId, messageId) {
      if (confirm("Are you sure you want to delete this message?")) {
        db.collection("Chats").doc(chatId).collection("messages").doc(messageId).delete()
          .then(() => {
            console.log("Message deleted successfully.");
          })
          .catch(error => {
            console.error("Error deleting message:", error);
          });
      }
    }

    // Delete a chat
    document.getElementById("delete-chat-button").addEventListener("click", () => {
      if (selectedChatId && confirm("Are you sure you want to delete this chat?")) {
        db.collection("Chats").doc(selectedChatId).delete()
          .then(() => {
            console.log("Chat deleted successfully.");
            selectedChatId = null;
            document.getElementById("chat-header").style.display = "none";
            document.getElementById("message-input-container").style.display = "none";
            document.getElementById("no-chat-selected").style.display = "flex";
            document.getElementById("message-list").innerHTML = "";
          })
          .catch(error => {
            console.error("Error deleting chat:", error);
          });
      }
    });

    // New Chat
    document.getElementById("new-chat-button").addEventListener("click", () => {
      const chatName = prompt("Enter the name of the recipient:");
      if (chatName) {
        const chatRef = db.collection("Chats").doc();
        const chatData = {
          chat_id: chatRef.id,
          chat_name: chatName,
          chat_avatar: "assets/img/default-avatar.png",
          last_message: null
        };
        chatRef.set(chatData).then(() => {
          console.log("New chat created.");
        }).catch(error => {
          console.error("Error creating new chat:", error);
        });
      }
    });

    // Emoji Picker
    const picker = new EmojiButton({
      position: 'top-start'
    });

    const trigger = document.getElementById('emoji-button');
    const messageInput = document.getElementById('message-text');

    picker.on('emoji', emoji => {
      messageInput.value += emoji;
      messageInput.focus();
    });

    trigger.addEventListener('click', () => {
      picker.togglePicker(trigger);
    });
  </script>

  <!-- Footer -->
  <footer id="footer" class="footer position-relative light-background">

    <div class="container footer-top">
      <div class="row gy-4">
        <div class="col-lg-4 col-md-6 footer-about">
          <a href="index.html" class="logo d-flex align-items-center">
            <img src="assets/img/smootutor-logo.jpg" alt="Logo">
            <span class="sitename ms-2">SMOOTutor</span>
          </a>
          <div class="footer-contact pt-3">
            <p>A108 Adam Street</p>
            <p>New York, NY 535022</p>
            <p class="mt-3"><strong>Phone:</strong> <span>+1 5589 55488 55</span></p>
            <p><strong>Email:</strong> <span>info@example.com</span></p>
          </div>
          <div class="social-links d-flex mt-4">
            <a href=""><i class="bi bi-twitter"></i></a>
            <a href=""><i class="bi bi-facebook"></i></a>
            <a href=""><i class="bi bi-instagram"></i></a>
            <a href=""><i class="bi bi-linkedin"></i></a>
          </div>
        </div>

        <div class="col-lg-2 col-md-3 footer-links">
          <h4>Useful Links</h4>
          <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="about.html">About us</a></li>
            <li><a href="services.html">Services</a></li>
            <li><a href="terms.html">Terms of service</a></li>
            <li><a href="privacy.html">Privacy policy</a></li>
          </ul>
        </div>

        <div class="col-lg-2 col-md-3 footer-links">
          <h4>Our Services</h4>
          <ul>
            <li><a href="#">Web Design</a></li>
            <li><a href="#">Web Development</a></li>
            <li><a href="#">Product Management</a></li>
            <li><a href="#">Marketing</a></li>
            <li><a href="#">Graphic Design</a></li>
          </ul>
        </div>

        <div class="col-lg-4 col-md-12 footer-newsletter">
          <h4>Our Newsletter</h4>
          <p>Subscribe to our newsletter and receive the latest news about our products and services!</p>
          <form action="forms/newsletter.php" method="post" class="php-email-form">
            <div class="newsletter-form"><input type="email" name="email"><input type="submit" value="Subscribe">
            </div>
            <div class="loading">Loading</div>
            <div class="error-message"></div>
            <div class="sent-message">Your subscription request has been sent. Thank you!</div>
          </form>
        </div>

      </div>
    </div>

    <div class="container text-center mt-4">
      <p>Â© <span>Copyright</span> <strong class="px-1 sitename">SMOOTutor</strong> <span>All Rights Reserved</span></p>
      <div class="credits">
        Designed by <a href="https://bootstrapmade.com/">BootstrapMade</a>
      </div>
    </div>

  </footer>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const topTutors = [
        'TOP_IS111:ChrispyChoo',
        'TOP_CS440:ZennyPotato',
        'TOP_MGMT293:YichiFinger',
        'TOP_COR1702:HandsumPlast',
        'TOP_FNC502:CloudyChong',
        'TOP_ACCT101:LingLingLongLong'
      ];

      const marqueeContent = document.querySelector('.boxes-inner');

      // Generate the boxes
      topTutors.forEach((tutor, index) => {
        const box = document.createElement('div');
        box.classList.add('box');
        box.textContent = tutor;
        marqueeContent.appendChild(box);
      });

      // Duplicate the content for seamless scrolling
      marqueeContent.innerHTML += marqueeContent.innerHTML;

      let contentWidth = marqueeContent.offsetWidth / 2; // Adjusted after duplication
      const marqueeWrapper = document.querySelector('.boxes');

      // Set initial direction
      let direction = -1; // -1 for left to right, 1 for right to left

      // Set up the GSAP animation
      let marqueeTween = gsap.to(".boxes-inner", {
        x: direction * contentWidth,
        duration: 30,
        ease: "linear",
        repeat: -1,
        modifiers: {
          x: gsap.utils.unitize(x => parseFloat(x) % contentWidth)
        }
      });

      // Pause movement and enhance interactivity on hover over boxes
      const boxes = document.querySelectorAll('.box');
      boxes.forEach(box => {
        box.addEventListener('mouseenter', function () {
          marqueeTween.pause();
          this.style.color = '#ffcc00'; // Change color on hover
          this.style.transform = 'scale(1.1)'; // Scale up on hover
        });
        box.addEventListener('mouseleave', function () {
          marqueeTween.play();
          this.style.color = '#fff'; // Reset color
          this.style.transform = 'scale(1)'; // Reset scale
        });
      });

      // Change background color on marquee hover
      marqueeWrapper.addEventListener('mouseenter', function () {
        marqueeWrapper.style.backgroundColor = '#333';
      });

      marqueeWrapper.addEventListener('mouseleave', function () {
        marqueeWrapper.style.backgroundColor = '#2e3a90';

        // Reverse direction when mouse leaves the marquee wrapper
        direction *= -1; // Reverse direction
        marqueeTween.kill(); // Kill the existing animation

        // Restart animation with new direction
        marqueeTween = gsap.to(".boxes-inner", {
          x: direction * contentWidth,
          duration: 30,
          ease: "linear",
          repeat: -1,
          modifiers: {
            x: gsap.utils.unitize(x => parseFloat(x) % contentWidth)
          }
        });
      });

      // Adjust marquee on window resize
      window.addEventListener('resize', function () {
        contentWidth = marqueeContent.offsetWidth / 2;
        marqueeTween.kill();
        marqueeTween = gsap.to(".boxes-inner", {
          x: direction * contentWidth,
          duration: 30,
          ease: "linear",
          repeat: -1,
          modifiers: {
            x: gsap.utils.unitize(x => parseFloat(x) % contentWidth)
          }
        });
      });
    });
  </script>

  <!-- Marquee Wrapper at the bottom -->
  <div class="wrapper" id="marquee-wrapper">
    <div class="boxes" id="marquee-content">
      <div class="boxes-inner">
        <!-- Boxes will be generated by JavaScript -->
      </div>
    </div>
  </div>

</body>

</html>